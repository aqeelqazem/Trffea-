# Trffea - مخطط التطبيق

## 1. نظرة عامة

**"Trffea"** هو تطبيق مكتبي وعبر الويب تم تطويره باستخدام Flutter، وهو مصمم ليكون أداة شاملة لإدارة شؤون موظفي الشركات، مع التركيز بشكل خاص على تتبع وإدارة استحقاقات الترقيات والعلاوات السنوية بشكل تلقائي ودقيق.

**الغرض الأساسي:**
أتمتة عملية مراقبة الجداول الزمنية لترقيات الموظفين وعلاواتهم، وتوفير تنبيهات استباقية للمستخدمين حول الاستحقاقات القادمة والمتأخرة، مع الأخذ في الاعتبار العوامل التي قد تؤثر على هذه الجداول الزمنية، مثل كتب الشكر التي تعجل من فترة الترقية.

---

## 2. الميزات المنجزة

لقد قمنا بتطوير مجموعة متكاملة من الميزات التي تجعل التطبيق أداة قوية وفعالة:

### إدارة الموظفين
- **إضافة، تعديل، وحذف الموظفين:** واجهات كاملة لإدارة بيانات الموظفين الأساسية (الاسم، العنوان الوظيفي، تاريخ التعيين، الراتب الحالي).
- **قائمة الموظفين:** عرض جميع الموظفين في قائمة رئيسية واضحة.
- **تفاصيل الموظف:** صفحة مخصصة لكل موظف تعرض جميع بياناته وتاريخ استحقاقاته.

### إدارة الدرجات الوظيفية
- **نظام درجات مرن:** إمكانية تعريف الدرجات الوظيفية المختلفة في المؤسسة.
- **إدارة كاملة للدرجات:** إضافة وتعديل وحذف الدرجات، مع تحديد (العنوان، الراتب الأساسي، ومقدار العلاوة السنوية) لكل درجة.
- **ربط الموظفين بالدرجات:** عند إضافة أو تعديل موظف، يتم تعيين درجة وظيفية له من قائمة الدرجات المعرّفة.

### نظام كتب الشكر
- **إضافة كتب الشكر:** لكل موظف، يمكن إضافة "كتب شكر وتقدير" مع تحديد عدد الشهور التي يتم خصمها من مدة الترقية.
- **تأثير تلقائي:** يقوم النظام تلقائيًا باحتساب الخصم من مدة الترقية بناءً على كتب الشكر المضافة.

### نظام التنبيهات والإشعارات
- **شاشة تنبيهات مركزية:** واجهة مخصصة تعرض أربع قوائم ديناميكية:
  1. **الترقيات المستحقة:** الموظفون الذين حان وقت ترقيتهم.
  2. **الترقيات القادمة:** الموظفون الذين سيستحقون الترقية خلال 90 يومًا.
  3. **العلاوات المستحقة:** الموظفون الذين حان وقت علاوتهم السنوية.
  4. **العلاوات القادمة:** الموظفون الذين سيستحقون العلاوة خلال 90 يومًا.
- **حسابات دقيقة:** يتم احتساب تواريخ الاستحقاق تلقائيًا بناءً على تاريخ التعيين، الدرجة الحالية، وكتب الشكر.

### تصدير التقارير
- **تصدير كملف CSV:** من شاشة التنبيهات، يمكن للمستخدم تصدير تقارير الترقيات والعلاوات بضغطة زر.
- **دعم متعدد المنصات:** تعمل ميزة التصدير بسلاسة على كل من الويب (Web) والمنصات الأخرى (Mobile/Desktop)، مع معالجة القيود التقنية لكل منصة.
- **مشاركة سهلة:** بعد إنشاء التقرير، تظهر نافذة المشاركة الأصلية للنظام لمشاركته عبر البريد الإلكتروني أو أي تطبيق آخر.

### إدارة البيانات
- **تخزين محلي دائم:** يتم حفظ جميع بيانات الموظفين والدرجات وكتب الشكر بشكل آمن ومستمر على الجهاز باستخدام قاعدة بيانات **Hive**.
- **حذف شامل للبيانات:** توجد ميزة اختيارية في القائمة الرئيسية لمسح جميع بيانات التطبيق والبدء من جديد، مع طلب تأكيد من المستخدم قبل الحذف.

---

## 3. التصميم والبنية البرمجية

### الواجهة وتجربة المستخدم (UI/UX)
- **تصميم عصري ونظيف:** تم اعتماد واجهة مستخدم بسيطة وواضحة تعتمد على `Material Design 3`.
- **سمة متناسقة:** تم تطبيق سمة (`ThemeData`) موحدة للتطبيق تشمل الألوان (`ColorScheme.fromSeed`) وأنماط الأزرار والبطاقات وشريط العنوان لضمان تجربة بصرية متناسقة.
- **دعم اللغة العربية:** جميع النصوص والمحتويات في التطبيق باللغة العربية.
- **تنسيق التواريخ:** استخدام حزمة `intl` لعرض التواريخ بتنسيق مفهوم ومقروء.

### البنية البرمجية (Architecture)
- **إدارة الحالة (State Management):** تم استخدام حزمة `provider` كحل لإدارة حالة التطبيق، مما يضمن فصلًا فعالًا بين الواجهة ومنطق العمل.
  - `EmployeeProvider`: لإدارة بيانات الموظفين والدرجات.
  - `NotificationsProvider`: لمعالجة منطق حساب التنبيهات والاستحقاقات.
- **النماذج (Models):** تم إنشاء نماذج بيانات واضحة (`Employee`, `Grade`, `ThanksBook`) مع محولات `HiveTypeAdapter` لتسهيل عملية التخزين.
- **هيكل المشروع:** تم تنظيم الملفات في مجلد `lib` بشكل منطقي (screens, providers, models) لتسهيل الصيانة والتطوير المستقبلي.

---
## 4. الخطة الحالية

**تم إنشاء هذا المستند كملخص شامل للحالة الحالية للمشروع وتوثيق لجميع الميزات التي تم تنفيذها بنجاح حتى الآن.**
